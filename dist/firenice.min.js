var FireNIce;(()=>{"use strict";var i={d:(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(i,t)=>Object.prototype.hasOwnProperty.call(i,t),r:i=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{AnimSprite:()=>r,Consts:()=>e,Engine:()=>T,Fire:()=>a,Frost:()=>h,Game:()=>b,GameState:()=>w,Ice:()=>l,Jar:()=>c,Keyboard:()=>d,Metal:()=>m,Player:()=>v,Position:()=>s,Resources:()=>A,Scene:()=>x,Sound:()=>p,Sparks:()=>S,Sprite:()=>n,Teleport:()=>u,Tile:()=>o,TileMap:()=>y,levels:()=>g,loadGameResources:()=>k});const e=Object.freeze({TileWidth:32,PhysicsSpeed:4,PlayerSpeed:2,SparkInterval:10,RipDuration:70,IntroDuration:32,SleepThreshold:500,PlayerAnimDelay:3,IceAnimDelay:9,MoveStand:0,MoveLeft:1,MoveRight:2,MoveDown:3,MoveUp:4,MoveTurn:5,MoveIceMake:6,MoveIceRemove:7,MoveIceMoving:8,MoveIceCheck:9,MoveRip:10,MovePush:16,MoveIceFail:11,MoveLevelExit:12,MoveLevelEnter:13,MoveTeleportOut:14,MoveTeleportIn:15,DirLeft:-1,DirRight:1,AnimDefaultDelay:2,AnimFrameCount:16,AnimLeftRow:1,AnimRightRow:0,AnimRunStart:0,AnimRunEnd:3,AnimStand:4,AnimTurnStart:4,AnimTurnEnd:7,AnimFallStart:8,AnimFallEnd:9,AnimBigFallStart:10,AnimBigFallEnd:11,AnimPushStart:12,AnimPushEnd:13,AnimJumpStart:14,AnimJumpEnd:15,AnimStandStart:16,AnimStandEnd:17,AnimIceStart:18,AnimIceEnd:19,AnimCrouchStart:20,AnimCrouchEnd:22,AnimRipStart:23,AnimRipEnd:24,AnimSleepStart:25,AnimSleepEnd:26,TileBackground:0,TileBothSides:32,TileLeftSide:64,TileMiddle:96,TileRightSide:128,ObjectOut:-1,ObjectBackground:0,ObjectWall:1,ObjectIce:3,ObjectMetal:4,ObjectJar:5,ObjectFire:6,ObjectPlayer:7,ObjectTeleport:8,GameStatePlay:1,GameStateIntro:2,GameStatePaused:3,GameStateTransition:4,ColorGreen:"124, 238, 66",ColorBlue:"122, 211, 255",ColorOrange:"255, 88, 33",ColorRed:"255, 135, 124",ColorWhite:"255, 255, 255"});class s{constructor(){this.u=0,this.d=0,this.l=0,this.r=0,this.ul=0,this.ur=0,this.dl=0,this.dr=0}}class h{constructor(i,t){this.left=i,this.right=t}}class n{constructor(i,t,h,n,r,o){this.engine=t,this.id=i,this.ctx=t.ctx,this.corners=new s,this.solid=!0,this.moving=!1,this.counter=!1,this.speed=4,this.state=e.MoveStand,this.height=o,this.width=r,this.direction=0,this.xTile=h,this.yTile=n,this.x=this.xTile*e.TileWidth,this.y=this.yTile*e.TileWidth}setState(i,t){this.moving=void 0!==t&&t,this.state=i,this.counter=0}getTile(i,t){return this.engine.map.getTile(i,t)}isSpriteAt(i,t){return this.xTile===i&&this.yTile===t}spriteTypeAt(i,t){return this.engine.spriteTypeAt(i,t)}updateCorners(){this.corners.u=this.spriteTypeAt(this.xTile,this.yTile-1),this.corners.d=this.spriteTypeAt(this.xTile,this.yTile+1),this.corners.l=this.spriteTypeAt(this.xTile-1,this.yTile),this.corners.r=this.spriteTypeAt(this.xTile+1,this.yTile),this.corners.ul=this.spriteTypeAt(this.xTile-1,this.yTile-1),this.corners.ur=this.spriteTypeAt(this.xTile+1,this.yTile-1),this.corners.dl=this.spriteTypeAt(this.xTile-1,this.yTile+1),this.corners.dr=this.spriteTypeAt(this.xTile+1,this.yTile+1)}updatePosition(){this.xTile=Math.floor(this.x/e.TileWidth),this.yTile=Math.floor(this.y/e.TileWidth)}move(){}engineMove(){this.updateCorners(),this.move(),this.updatePosition()}}class r extends n{constructor(i,t,s,h,n,r,o,a,l,d,c,m){super(i,t,h,n,r,o),this.image=this.engine.resources.get(s),this.animLoop=m,this.animStart=d,this.animEnd=c,this.animCount=0,this.animDelay=e.AnimDefaultDelay,this.animDelayCount=0,this.animRow=0,this.offsetX=a,this.offsetY=l}setAnim(i,t,s,h,n,r){r=void 0!==r&&r,n=void 0===n?e.AnimDefaultDelay:n,h=void 0===h?this.animRow:h,r&&this.animStart===i&&this.animEnd===t&&this.animLoop===s&&this.animRow===h||(this.animStart=i,this.animEnd=t,this.animCount=i,this.animLoop=s,this.animDelay=n,this.animRow=h)}draw(){this.ctx.drawImage(this.image,this.animCount*this.width,this.animRow*this.height,this.width,this.height,this.x+this.offsetX,this.y+this.offsetY,this.width,this.height),this.animDelayCount++>this.animDelay&&(this.animCount+=1,this.animCount>this.animEnd&&(this.animLoop?this.animCount=this.animStart:this.animCount=this.animEnd),this.animDelayCount=0)}drawFrost(){const i=this.engine.spriteAt(this.xTile-1,this.yTile);i&&i.id===e.ObjectIce&&i.frozen.right&&this.ctx.drawImage(this.engine.resources.get("frost"),this.xTile*this.width-7,this.yTile*this.height);const t=this.engine.spriteAt(this.xTile+1,this.yTile);t&&t.id===e.ObjectIce&&t.frozen.left&&this.ctx.drawImage(this.engine.resources.get("frost"),(this.xTile+this.length)*this.width-7,this.yTile*this.height)}}const o=Object.freeze({tiles:{[e.ObjectBackground]:{solid:!1,freeze:!1},[e.ObjectOut]:{solid:!0,freeze:!1},[e.ObjectPlayer]:{solid:!0,freeze:!1},[e.ObjectIce]:{solid:!0,freeze:!1},[e.ObjectMetal]:{solid:!0,freeze:!0},[e.ObjectWall]:{solid:!0,freeze:!0},[e.ObjectFire]:{solid:!1,freeze:!1},[e.ObjectJar]:{solid:!0,freeze:!0},[e.ObjectTeleport]:{solid:!0,freeze:!0}},isSolid:function(i){if(void 0===this.tiles[i])throw new Error("UNDEFINED ON isSolid");return this.tiles[i].solid},isFreezable:function(i){if(void 0===this.tiles[i])throw new Error("UNDEFINED ON isFreezable");return this.tiles[i].freeze}});class a extends r{constructor(i,t,s){super(e.ObjectFire,i,"img_fire",t,s,e.TileWidth,e.TileWidth,0,0,0,3,!0)}move(){this.moving||(this.collisions(),this.gravity()),this.state===e.MoveDown&&this.doDown()}collisions(){this.engine.spriteTypeAt(this.xTile,this.yTile,e.ObjectFire)===e.ObjectIce&&(this.engine.sound.play("fire-off"),this.engine.removeFire(this.xTile,this.yTile),this.engine.removeIceBlock(this.xTile,this.yTile),this.engine.addSparks(this.xTile,this.yTile,"255, 126, 198",15,.5),this.engine.addSparks(this.xTile,this.yTile,"124, 212, 255",10)),this.engine.spriteTypeAt(this.xTile,this.yTile,e.ObjectFire)===e.ObjectMetal&&(this.engine.sound.play("fire-off"),this.engine.removeFire(this.xTile,this.yTile),this.engine.addSparks(this.xTile,this.yTile,"255, 222, 127",15,.5),this.engine.addSparks(this.xTile,this.yTile,"41, 42, 90",10))}gravity(){return!o.isSolid(this.corners.d)&&this.corners.d!==e.ObjectFire&&(this.setState(e.MoveDown,!0),!0)}doDown(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.y+=e.PhysicsSpeed:this.setState(e.MoveStand,!1)}}class l extends r{constructor(i,t,s,n,r){super(e.ObjectIce,i,"img_ice",t,s,e.TileWidth,e.TileWidth,0,0,0,1,!0),this.xTile=t,this.yTile=s,this.length=n,this.animEnd=1,this.animDelay=e.IceAnimDelay,this.animRow=0,this.direction=0,this.falling=!1,void 0!==r?this.frozen=r:(this.frozen=new h(!1,!1),this.updateCorners(),this.checkFreeze())}addBlock(i){const t=this.engine.spriteTypeAt(i-1,this.yTile),s=this.engine.spriteTypeAt(this.xTile+this.length+1,this.yTile);i>this.xTile&&(this.getTile(i+1,this.yTile)!==e.ObjectWall&&s!==e.ObjectMetal&&s!==e.ObjectJar||(this.frozen.right=!0)),i<this.xTile&&(this.xTile=i,this.getTile(i-1,this.yTile)!==e.ObjectWall&&t!==e.ObjectMetal&&t!==e.ObjectJar||(this.frozen.left=!0)),this.x=this.xTile*e.TileWidth,this.length+=1}isSpriteAt(i,t){return this.yTile===t&&i>=this.xTile&&i<this.xTile+this.length}removeBlock(i){return i===this.xTile?(this.xTile+=1,this.x+=e.TileWidth,this.length-=1,this.checkUnfreezeLeft()):i===this.xTile+this.length-1?(this.length-=1,this.checkUnfreezeRight()):(this.engine.addSprite(new l(this.engine,i+1,this.yTile,this.xTile+this.length-i-1,new h(!1,this.frozen.right))),this.length=i-this.xTile,this.checkUnfreezeRight()),this.length}canGlide(i){return!(1!==this.length||this.frozen.left||this.frozen.right||i===e.DirLeft&&o.isSolid(this.corners.l)||i===e.DirRight&&o.isSolid(this.corners.r))}isFrozen(){return this.frozen.left||this.frozen.right}gravity(){return o.isSolid(this.corners.d)||this.isFrozen()?(this.falling&&(this.falling=!1,this.engine.sound.play("ice-collision")),!1):(this.falling=!0,this.setState(e.MoveDown,!0),!0)}collision(){return!this.canGlide(this.direction)&&(this.direction=0,this.engine.sound.play("ice-collision"),!0)}move(){for(let i=0;i<this.length;i++){const t=this.spriteTypeAt(this.xTile+i,this.yTile+1);t&&t!==e.ObjectFire&&(this.corners.d=t)}switch(this.corners.r=this.spriteTypeAt(this.xTile+this.length,this.yTile),this.isFrozen()&&(this.checkUnfreezeLeft(),this.checkUnfreezeRight()),this.moving||this.gravity(),this.state){case e.MoveIceMoving:this.glide();break;case e.MoveIceCheck:this.push();break;case e.MoveDown:this.doDown()}}draw(){if(this.ctx.save(),this.animDelayCount++>this.animDelay&&(this.animDelayCount=0,this.animRow=0===this.animRow?1:0),1===this.length)this.ctx.drawImage(this.image,0,e.TileWidth*this.animRow,this.width,this.height,this.x,this.y,this.width,this.height);else if(2===this.length)this.ctx.drawImage(this.image,e.TileWidth,e.TileWidth*this.animRow,this.width,this.height,this.x,this.y,this.width,this.height),this.ctx.drawImage(this.image,3*e.TileWidth,e.TileWidth*this.animRow,this.width,this.height,this.x+e.TileWidth,this.y,this.width,this.height);else{this.ctx.drawImage(this.image,e.TileWidth,e.TileWidth*this.animRow,this.width,this.height,this.x,this.y,this.width,this.height),this.ctx.drawImage(this.image,3*e.TileWidth,e.TileWidth*this.animRow,this.width,this.height,this.x+e.TileWidth*(this.length-1),this.y,this.width,this.height);for(let i=1;i<this.length-1;i++)this.ctx.drawImage(this.image,2*e.TileWidth,e.TileWidth*this.animRow,this.width,this.height,this.x+e.TileWidth*i,this.y,this.width,this.height)}this.frozen.left&&this.ctx.drawImage(this.engine.resources.get("frost"),this.xTile*this.width-7,this.yTile*this.height),this.frozen.right&&this.ctx.drawImage(this.engine.resources.get("frost"),(this.xTile+this.length)*this.width-7,this.yTile*this.height),this.ctx.restore()}glide(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.x+=e.PhysicsSpeed*this.direction:this.push()}doDown(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.y+=e.PhysicsSpeed:this.gravity()||this.setState(e.MoveStand,!1)}push(i){this.direction=void 0===i?this.direction:i,this.collision()||this.gravity()?this.setState(e.MoveStand,!1):this.setState(e.MoveIceMoving,!0)}checkFreeze(){o.isFreezable(this.corners.l)?this.frozen.left=!0:this.frozen.left=!1,o.isFreezable(this.corners.r)?this.frozen.right=!0:this.frozen.right=!1}checkUnfreezeLeft(){this.frozen.left&&!o.isFreezable(this.corners.l)&&(this.frozen.left=!1)}checkUnfreezeRight(){this.frozen.right&&!o.isFreezable(this.corners.r)&&(this.frozen.right=!1)}}class d{constructor(){this.up=!1,this.down=!1,this.left=!1,this.right=!1,this.action=!1,this.escape=!1,this.mKey=!1,this.sKey=!1,this.keydown=this.keydown_.bind(this),this.keyup=this.keyup_.bind(this),this.intro=!0,this.mobileHandlers=[],window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1),document.getElementById("canvas"),this.canvasClickHandler=()=>{this.intro&&(this.enter=!0),this.intro=!1},this.bindMobileButton("btn_action","pointerdown",()=>{this.down=!0,this.action=!0,this.left=!1,this.right=!1}),this.bindMobileButton("btn_action","pointerup",()=>{this.down=!1,this.action=!1}),this.bindMobileButton("btn_action","pointerleave",()=>{this.down=!1,this.action=!1}),this.bindMobileButton("btn_left","pointerdown",()=>{this.left=!0,this.right=!1}),this.bindMobileButton("btn_left","pointerup",()=>this.left=!1),this.bindMobileButton("btn_left","pointerleave",()=>this.left=!1),this.bindMobileButton("btn_right","pointerdown",()=>{this.right=!0,this.left=!1}),this.bindMobileButton("btn_right","pointerup",()=>this.right=!1),this.bindMobileButton("btn_right","pointerleave",()=>this.right=!1),this.bindMobileButton("btn_up","pointerdown",()=>this.up=!0),this.bindMobileButton("btn_up","pointerup",()=>this.up=!1),this.bindMobileButton("btn_up","pointerleave",()=>this.up=!1),this.bindMobileButton("btn_down","pointerdown",()=>{this.down=!0,this.action=!0}),this.bindMobileButton("btn_down","pointerup",()=>{this.down=!1,this.action=!1}),this.bindMobileButton("btn_down","pointerleave",()=>{this.down=!1,this.action=!1}),this.bindMobileButton("btn_select","click",()=>this.enter=!0)}bindMobileButton(i,t,e){const s=document.getElementById(i);s&&(s.addEventListener(t,e),this.mobileHandlers.push({element:s,event:t,handler:e}))}destroy(){window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1);const i=document.getElementById("canvas");i&&this.canvasClickHandler&&i.removeEventListener("click",this.canvasClickHandler);for(const{element:i,event:t,handler:e}of this.mobileHandlers)i.removeEventListener(t,e);this.mobileHandlers=[]}keydown_(i){const t=i.target&&i.target.tagName;if("INPUT"!==t&&"TEXTAREA"!==t&&"SELECT"!==t)switch(i.preventDefault(),i.key){case"ArrowLeft":this.left=!0,this.right=!1;break;case"ArrowUp":this.up=!0;break;case"ArrowRight":this.right=!0,this.left=!1;break;case"ArrowDown":case" ":this.action=!0,this.left=!1,this.right=!1,this.down=!0;break;case"Enter":this.enter=!1;break;case"Escape":this.escape=!0;break;case"m":case"M":this.mKey=!0;break;case"s":case"S":this.sKey=!0}}keyup_(i){switch(i.preventDefault(),i.key){case"ArrowLeft":this.left=!1;break;case"ArrowUp":this.up=!1;break;case"ArrowRight":this.right=!1;break;case"ArrowDown":case" ":this.action=!1,this.down=!1;break;case"Enter":this.enter=!0}}}class c extends r{constructor(i,t,s){super(e.ObjectJar,i,"img_jar",t,s,e.TileWidth,e.TileWidth,0,0,0,3,!0),this.animDelay=2*e.AnimDefaultDelay,this.onFire=!1,this.animRow=0}move(){this.moving||(this.collisions(),this.gravity()),this.state===e.MoveDown&&this.doDown()}collisions(){this.onFire||this.corners.u!==e.ObjectFire||(this.turnOnFire(),this.engine.removeFire(this.xTile,this.yTile-1)),this.onFire&&this.corners.u===e.ObjectIce&&this.meltIce()}gravity(){return!this.corners.d&&(this.setState(e.MoveDown,!0),!0)}doDown(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.y+=e.PhysicsSpeed:this.setState(e.MoveStand,!1)}turnOnFire(){this.animRow=1,this.onFire=!0,this.engine.sound.play("fire-off"),this.engine.addSparks(this.xTile,this.yTile-1,e.ColorOrange,30)}meltIce(){this.engine.removeIceBlock(this.xTile,this.yTile-1),this.engine.addSparks(this.xTile,this.yTile-1,e.ColorOrange,20),this.engine.addSparks(this.xTile,this.yTile-1,e.ColorBlue,10),this.engine.sound.play("fire-off")}draw(){super.draw(),this.drawFrost()}}class m extends r{constructor(i,t,s,h){super(e.ObjectMetal,i,"img_metal",t,s,e.TileWidth,e.TileWidth,0,0,0,1,!0),this.xTile=t,this.yTile=s,this.length=h,this.animDelay=9,this.direction=0,this.falling=!1}canGlide(i){return!(i===e.DirLeft&&o.isSolid(this.corners.l)||i===e.DirRight&&o.isSolid(this.corners.r))}frozenToIce(){const i=this.engine.spriteAt(this.xTile+1,this.yTile),t=this.engine.spriteAt(this.xTile-1,this.yTile);return!this.falling&&(i&&i.id===e.ObjectIce&&i.frozen.left||t&&t.id===e.ObjectIce&&t.frozen.right)}gravity(){return o.isSolid(this.corners.d)||this.frozenToIce()?(this.falling&&(this.falling=!1,this.engine.sound.play("ice-collision")),!1):(this.falling=!0,this.setState(e.MoveDown,!0),!0)}collision(){return this.canGlide(this.direction)?!!this.gravity():(this.direction=0,this.engine.sound.play("ice-collision"),this.setState(e.MoveStand,!1),!0)}move(){switch(this.moving||this.gravity(),this.state){case e.MoveIceMoving:this.glide();break;case e.MoveIceCheck:this.push();break;case e.MoveDown:this.doDown()}}draw(){super.draw(),this.drawFrost()}glide(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.x+=e.PhysicsSpeed*this.direction:this.setState(e.MoveStand,!1)}doDown(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.y+=e.PhysicsSpeed:this.setState(e.MoveStand,!1)}push(i){this.direction=void 0===i?this.direction:i,this.collision()?this.setState(e.MoveStand,!1):(this.moving=!0,this.setState(e.MoveIceMoving,!0))}}class v extends r{constructor(i,t,s){super(e.ObjectPlayer,i,"img_dona",t,s,48,64,-10,-32,2,2,!1),this.speed=e.PlayerSpeed,this.direction=1,this.state=0,this.moving=!1,this.tileWidth=e.TileWidth,this.tileHeight=e.TileWidth,this.animDelay=e.PlayerAnimDelay,this.counter=0,this.fallCounter=0,this.innerCounter=0,this.standCounter=0,this.intro()}left(){this.moving||(this.direction!==e.DirLeft?(o.isSolid(this.corners.u)?this.setAnim(e.AnimCrouchStart,e.AnimCrouchStart,!1,e.AnimLeftRow,4):this.setAnim(e.AnimTurnStart,e.AnimTurnEnd,!1,e.AnimRightRow,4),this.setState(e.MoveTurn,!0),this.direction=e.DirLeft):(!o.isSolid(this.corners.l)&&o.isSolid(this.corners.d)&&(o.isSolid(this.corners.u)||o.isSolid(this.corners.ul)?this.setAnim(e.AnimCrouchStart,e.AnimCrouchEnd,!0,e.AnimLeftRow,2):this.setAnim(e.AnimRunStart,e.AnimRunEnd,!0,e.AnimLeftRow,2),this.setState(e.MoveLeft,!0)),!o.isSolid(this.corners.d)||this.corners.l!==e.ObjectIce&&this.corners.l!==e.ObjectMetal||this.push(),!o.isSolid(this.corners.l)||!o.isSolid(this.corners.d)||o.isSolid(this.corners.u)||o.isSolid(this.corners.ul)||this.moving||(this.setAnim(e.AnimPushStart,e.AnimPushStart,!1,e.AnimLeftRow),this.setState(e.MoveUp,!0))))}right(){this.moving||(this.direction!==e.DirRight?(o.isSolid(this.corners.u)?this.setAnim(e.AnimCrouchStart,e.AnimCrouchStart,!1,e.AnimRightRow,4):this.setAnim(e.AnimTurnStart,e.AnimTurnEnd,!1,e.AnimLeftRow,4),this.setState(e.MoveTurn,!0),this.direction=e.DirRight):(!o.isSolid(this.corners.r)&&o.isSolid(this.corners.d)&&(o.isSolid(this.corners.u)||o.isSolid(this.corners.ur)?this.setAnim(e.AnimCrouchStart,e.AnimCrouchEnd,!0,e.AnimRightRow,2):this.setAnim(e.AnimRunStart,e.AnimRunEnd,!0,e.AnimRightRow,2),this.setState(e.MoveRight,!0)),!o.isSolid(this.corners.d)||this.corners.r!==e.ObjectIce&&this.corners.r!==e.ObjectMetal||this.push(),!o.isSolid(this.corners.r)||!o.isSolid(this.corners.d)||o.isSolid(this.corners.u)||o.isSolid(this.corners.ur)||this.moving||(this.setAnim(e.AnimPushStart,e.AnimPushStart,!1,e.AnimRightRow),this.setState(e.MoveUp,!0))))}burn(){this.state!==e.MoveRip&&(this.engine.sound.playOnce("danger"),this.counter=0,this.innerCounter=0,this.setState(e.MoveRip,!0),this.setAnim(e.AnimRipStart,e.AnimRipEnd,!0,e.AnimRightRow))}intro(){this.setAnim(e.AnimBigFallStart,e.AnimBigFallEnd,!0,e.AnimRightRow,4),this.setState(e.MoveLevelEnter,!0)}outro(){this.setAnim(e.AnimFallStart,e.AnimBigFallEnd,!0,e.AnimRightRow,4),this.setState(e.MoveLevelExit,!0),this.innerCounter=0}doRip(){this.counter+=1,this.counter%e.SparkInterval===0&&(this.engine.addSparks(this.xTile,this.yTile,e.ColorRed,5,1.2),this.engine.addSparks(this.xTile,this.yTile,e.ColorBlue,5,.7)),this.counter>=e.RipDuration&&(this.engine.addSparks(this.xTile,this.yTile,e.ColorRed,15,2),this.engine.addSparks(this.xTile,this.yTile,e.ColorBlue,10,3),this.counter=0,this.engine.keyboard.enter=!0)}gravity(){if(!this.moving)if(void 0===this.corners.d&&console.error("undefined corner"),o.isSolid(this.corners.d)){if(this.engine.sound.stop("falling"),this.state===e.MoveDown&&(this.engine.sound.play("fall"),this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,10,.75),this.engine.addSparks(this.xTile,this.yTile,e.ColorRed,5,1.25)),this.fallCounter=0,this.setState(e.MoveStand,!1),this.corners.d===e.ObjectJar){const i=this.engine.spriteAt(this.xTile,this.yTile+1);i&&i.onFire&&this.burn()}}else this.setState(e.MoveDown,!0),this.fallCounter>=1?(this.engine.sound.playOnce("falling"),this.setAnim(e.AnimBigFallStart,e.AnimBigFallEnd,!0,e.AnimRightRow,1)):this.setAnim(e.AnimBigFallStart,e.AnimBigFallEnd,!0,e.AnimRightRow,3)}iceOrTeleport(){this.moving||(this.corners.d===e.ObjectTeleport?this.teleport():this.ice())}teleport(){this.moving||(this.setAnim(e.AnimFallStart,e.AnimBigFallEnd,!0,e.AnimRightRow,4),this.setState(e.MoveTeleportOut,!0),this.innerCounter=0,this.doTeleportIn())}ice(){this.moving||o.isSolid(this.corners.d)&&(this.direction===e.DirRight?o.isSolid(this.corners.dr)||this.corners.dr===e.ObjectFire?this.corners.dr===e.ObjectIce?(this.setAnim(e.AnimIceStart,e.AnimIceEnd,!1,e.AnimRightRow,4),this.setState(e.MoveIceRemove,!0)):(this.setAnim(e.AnimIceStart,e.AnimIceEnd,!1,e.AnimRightRow,4),this.setState(e.MoveIceFail,!0)):(this.setAnim(e.AnimIceStart,e.AnimIceEnd,!1,e.AnimRightRow,4),this.setState(e.MoveIceMake,!0)):o.isSolid(this.corners.dl)||this.corners.dl===e.ObjectFire?this.corners.dl===e.ObjectIce?(this.setAnim(e.AnimIceStart,e.AnimIceEnd,!1,e.AnimLeftRow,4),this.setState(e.MoveIceRemove,!0)):(this.setAnim(e.AnimIceStart,e.AnimIceEnd,!1,e.AnimLeftRow,4),this.setState(e.MoveIceFail,!0)):(this.setAnim(e.AnimIceStart,e.AnimIceEnd,!1,e.AnimLeftRow,4),this.setState(e.MoveIceMake,!0)))}jump(){this.moving||(this.direction===e.DirRight?!o.isSolid(this.corners.r)||o.isSolid(this.corners.ur)||o.isSolid(this.corners.u)||(this.setAnim(e.AnimPushStart,e.AnimPushStart,!1,e.AnimRightRow),this.setState(e.MoveUp,!0)):!o.isSolid(this.corners.l)||o.isSolid(this.corners.ul)||o.isSolid(this.corners.u)||(this.setAnim(e.AnimPushStart,e.AnimPushStart,!1,e.AnimLeftRow),this.setState(e.MoveUp,!0)))}doRun(){this.counter+=1,this.counter<=e.AnimFrameCount?this.x+=this.speed*this.direction:this.setState(e.MoveStand,!1)}doTurn(){this.counter+=1,this.counter>=e.AnimFrameCount&&this.setState(e.MoveStand,!1)}doOutro(){this.counter+=1,this.counter%e.SparkInterval===0&&(this.innerCounter+=1,1===this.innerCounter&&this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,25,.5),3===this.innerCounter&&this.engine.addSparks(this.xTile,this.yTile,e.ColorRed,30,1),5===this.innerCounter&&this.engine.addSparks(this.xTile,this.yTile,e.ColorBlue,35,1.5),this.innerCounter%2==0&&this.innerCounter<6&&this.engine.sound.play("climb")),this.innerCounter%2==1?this.y+=1:this.y-=1,this.innerCounter>=6&&(this.engine.sound.play("state-leave"),this.setState(e.MoveStand,!1),this.engine.nextLevel())}doIntro(){this.counter+=1,8===this.counter&&(this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,20,2.5),this.engine.addSparks(this.xTile,this.yTile,e.ColorRed,35,1),this.engine.addSparks(this.xTile,this.yTile,e.ColorBlue,20,1.5),this.engine.sound.play("stage-enter")),this.counter>=e.IntroDuration&&(this.engine.sound.stop("falling"),this.setState(e.MoveStand,!1))}doGravity(){this.counter+=1,this.counter<=e.AnimFrameCount?this.y+=this.speed:(this.moving=!1,this.gravity(),this.fallCounter++)}doStand(){o.isSolid(this.corners.u)?this.setAnim(e.AnimCrouchStart,e.AnimCrouchStart,!1,1!==this.direction?e.AnimLeftRow:e.AnimRightRow,8,!0):this.standCounter++>e.SleepThreshold?this.setAnim(e.AnimSleepStart,e.AnimSleepEnd,!0,1!==this.direction?e.AnimLeftRow:e.AnimRightRow,48,!0):this.setAnim(e.AnimStandStart,e.AnimStandEnd,!0,1!==this.direction?e.AnimLeftRow:e.AnimRightRow,8,!0)}doUp(){if(this.counter+=1,this.counter<=18)switch(this.counter){case 3:this.engine.sound.play("climb"),this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,10,.75),this.engine.addSparks(this.xTile,this.yTile,e.ColorRed,5,1.25),this.setAnim(e.AnimPushEnd,e.AnimPushEnd,!1,this.direction===e.DirRight?e.AnimRightRow:e.AnimLeftRow);break;case 6:this.setAnim(e.AnimJumpStart,e.AnimJumpStart,!1,this.direction===e.DirRight?e.AnimRightRow:e.AnimLeftRow),this.x+=8*this.direction,this.y-=8;break;case 9:this.setAnim(e.AnimJumpEnd,e.AnimJumpEnd,!1,this.direction===e.DirRight?e.AnimRightRow:e.AnimLeftRow),this.x+=8*this.direction,this.y-=8;break;case 12:this.setAnim(2,2,!1,this.direction===e.DirRight?e.AnimRightRow:e.AnimLeftRow),this.x+=8*this.direction,this.y-=8;break;case 18:this.setAnim(e.AnimStand,e.AnimStand,!1,this.direction===e.DirRight?e.AnimRightRow:e.AnimLeftRow),this.x+=8*this.direction,this.y-=8}else this.setState(e.MoveStand,!1)}makeIce(){this.engine.sound.play("new-ice"),this.engine.addIceBlock(this.xTile+this.direction,this.yTile+1),this.engine.addSparks(this.xTile+this.direction,this.yTile+1),this.engine.addSparks(this.xTile+this.direction,this.yTile+1,e.ColorBlue,5)}removeIceBlock(){this.engine.sound.play("ice-remove"),this.engine.removeIceBlock(this.xTile+this.direction,this.yTile+1),this.engine.addSparks(this.xTile+this.direction,this.yTile+1),this.engine.addSparks(this.xTile+this.direction,this.yTile+1,e.ColorBlue,5)}push(){const i=this.engine.iceAt(this.xTile+this.direction,this.yTile);i&&i.canGlide(this.direction)&&(this.engine.addSparks(this.xTile+this.direction,this.yTile,e.ColorWhite,3),this.engine.addSparks(this.xTile+this.direction,this.yTile,e.ColorBlue,3,1.5),this.setAnim(e.AnimPushStart,e.AnimPushEnd,!1,this.direction===e.DirRight?e.AnimRightRow:e.AnimLeftRow,3),this.setState(e.MovePush,!0))}doPush(){if(this.counter+=2,this.counter>e.AnimFrameCount){const i=this.engine.iceAt(this.xTile+this.direction,this.yTile);i&&(this.engine.sound.play("ice-push"),i.push(this.direction)),this.setState(e.MoveStand,!1)}}doIce(){8===this.counter&&(this.state===e.MoveIceMake?this.makeIce():this.removeIceBlock()),this.counter+=1,this.counter>=e.AnimFrameCount&&this.setState(e.MoveStand,!1)}doFailIce(){8===this.counter&&(this.engine.sound.play("ice-disabled"),this.engine.addSparks(this.xTile+this.direction,this.yTile+1,"88,66,66")),this.counter+=1,this.counter>=e.AnimFrameCount&&this.setState(e.MoveStand,!1)}doTeleportIn(){this.counter+=1,this.counter%e.SparkInterval===0&&(this.innerCounter+=1,1===this.innerCounter&&(this.engine.sound.play("climb"),this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,10,.5)),2===this.innerCounter&&this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,10,1.5)),this.innerCounter>=2&&this.doTeleportOut()}doTeleportOut(){const i=this.engine.spriteAt(this.xTile,this.yTile+1);i&&i.link?(this.x=i.link.x,this.y=i.link.y-32,this.updatePosition(),this.engine.addSparks(this.xTile,this.yTile,e.ColorGreen,15,1.5),this.engine.sound.play("ice-remove"),this.setState(e.MoveStand,!1)):this.setState(e.MoveStand,!1)}collisions(){this.engine.spriteTypeAt(this.xTile,this.yTile,e.ObjectPlayer)===e.ObjectFire&&this.burn()}move(){switch(this.gravity(),this.collisions(),this.state!==e.MoveStand&&(this.standCounter=0),this.state!==e.MoveDown&&(this.fallCounter=0),this.state){case e.MoveRight:case e.MoveLeft:this.doRun();break;case e.MoveDown:this.doGravity();break;case e.MoveUp:this.doUp();break;case e.MoveTurn:this.doTurn();break;case e.MoveIceMake:case e.MoveIceRemove:this.doIce();break;case e.MoveIceFail:this.doFailIce();break;case e.MoveStand:this.doStand();break;case e.MovePush:this.doPush();break;case e.MoveRip:this.doRip();break;case e.MoveLevelExit:this.doOutro();break;case e.MoveTeleportOut:this.doTeleportIn();break;case e.MoveLevelEnter:this.doIntro()}}}class y{constructor(i,t,s){this.ctx=i.ctx,this.engine=i,this.map=t,this.theme=s,this.tileWidth=e.TileWidth,this.tileHeight=e.TileWidth,this.height=this.map.length-1,this.width=this.map[0].length-1,this.tilesImage=this.engine.resources.get("tilemap")}getTile(i,t){return i<0||t<0||i>this.width||t>this.height?e.ObjectOut:this.map[t][i]}draw(){this.ctx.save();for(let i=0;i<=this.width;++i)for(let t=0;t<=this.height;++t){let s=e.TileBackground;1===this.map[t][i]&&(s=this.getTile(i-1,t)||this.getTile(i+1,t)?this.getTile(i-1,t)?this.getTile(i+1,t)?e.TileMiddle:e.TileRightSide:e.TileLeftSide:e.TileBothSides),this.ctx.drawImage(this.tilesImage,s,this.theme*this.tileHeight,this.tileWidth,this.tileHeight,i*this.tileWidth,t*this.tileHeight,this.tileWidth,this.tileHeight)}this.ctx.restore()}move(){}engineMove(){}}const g=[{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:0,sprites:[{id:7,x:13,y:5,v:1},{id:3,x:7,y:10,v:1},{id:3,x:7,y:9,v:1},{id:3,x:7,y:8,v:1},{id:3,x:7,y:7,v:1},{id:6,x:8,y:5,v:1},{id:3,x:10,y:5,v:1},{id:6,x:9,y:10,v:1},{id:6,x:9,y:9,v:1},{id:6,x:9,y:8,v:1},{id:6,x:11,y:11,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:1,sprites:[{id:7,x:5,y:8,v:1},{id:6,x:8,y:8,v:1},{id:3,x:6,y:8,v:1},{id:3,x:12,y:6,v:4},{id:6,x:14,y:9,v:1},{id:6,x:14,y:8,v:1},{id:6,x:14,y:7,v:1},{id:6,x:15,y:9,v:1},{id:3,x:13,y:9,v:1},{id:3,x:13,y:8,v:1},{id:3,x:13,y:7,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:2,sprites:[{id:7,x:16,y:7,v:1},{id:6,x:12,y:10,v:1},{id:3,x:7,y:5,v:1},{id:6,x:11,y:7,v:1},{id:6,x:11,y:6,v:1},{id:3,x:13,y:7,v:1},{id:3,x:13,y:6,v:1},{id:3,x:10,y:7,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:0,sprites:[{id:7,x:10,y:10,v:1},{id:6,x:14,y:9,v:1},{id:6,x:15,y:8,v:1},{id:6,x:13,y:10,v:1},{id:3,x:8,y:9,v:5},{id:3,x:12,y:10,v:1},{id:3,x:12,y:8,v:3},{id:3,x:14,y:7,v:2},{id:3,x:8,y:10,v:1},{id:3,x:6,y:8,v:3},{id:3,x:5,y:7,v:2},{id:6,x:7,y:10,v:1},{id:6,x:6,y:9,v:1},{id:6,x:5,y:8,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:13,y:9,v:1},{id:3,x:12,y:11,v:3},{id:3,x:12,y:10,v:3},{id:3,x:9,y:8,v:1},{id:3,x:5,y:6,v:1},{id:3,x:11,y:8,v:1},{id:6,x:5,y:11,v:1},{id:3,x:5,y:5,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:5,sprites:[{id:7,x:15,y:4,v:1},{id:3,x:5,y:5,v:1,fl:!1,fr:!1},{id:3,x:8,y:7,v:1,fl:!1,fr:!1},{id:3,x:10,y:7,v:1,fl:!1,fr:!1},{id:3,x:12,y:7,v:1,fl:!1,fr:!1},{id:3,x:4,y:9,v:13,fl:!0,fr:!1},{id:6,x:4,y:8,v:1},{id:6,x:5,y:11,v:1},{id:6,x:6,y:11,v:1},{id:6,x:7,y:11,v:1},{id:6,x:8,y:11,v:1},{id:6,x:9,y:11,v:1},{id:6,x:10,y:11,v:1},{id:6,x:11,y:11,v:1},{id:6,x:12,y:11,v:1},{id:6,x:13,y:11,v:1},{id:6,x:14,y:11,v:1},{id:6,x:15,y:11,v:1},{id:6,x:16,y:11,v:1},{id:3,x:16,y:5,v:1,fl:!0,fr:!0},{id:3,x:4,y:6,v:1,fl:!0,fr:!0}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:1,sprites:[{id:7,x:14,y:5,v:1},{id:6,x:10,y:11,v:1},{id:6,x:11,y:12,v:1},{id:6,x:12,y:12,v:1},{id:3,x:10,y:6,v:5},{id:3,x:12,y:5,v:1},{id:3,x:8,y:7,v:1},{id:6,x:8,y:6,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:1,sprites:[{id:7,x:10,y:7,v:1},{id:6,x:7,y:11,v:1},{id:6,x:8,y:11,v:1},{id:6,x:9,y:11,v:1},{id:6,x:10,y:11,v:1},{id:6,x:11,y:11,v:1},{id:6,x:12,y:11,v:1},{id:3,x:13,y:11,v:2},{id:3,x:7,y:10,v:7},{id:6,x:7,y:9,v:1},{id:3,x:13,y:7,v:1},{id:6,x:13,y:6,v:1},{id:3,x:8,y:6,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:7,y:5,v:1},{id:6,x:7,y:9,v:1},{id:3,x:10,y:6,v:1},{id:3,x:10,y:5,v:1},{id:6,x:13,y:9,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:10,sprites:[{id:7,x:5,y:5,v:1},{id:6,x:4,y:7,v:1},{id:6,x:5,y:8,v:1},{id:6,x:6,y:9,v:1},{id:6,x:7,y:10,v:1},{id:6,x:8,y:11,v:1},{id:6,x:9,y:11,v:1},{id:6,x:10,y:10,v:1},{id:6,x:11,y:9,v:1},{id:6,x:12,y:8,v:1},{id:6,x:13,y:7,v:1},{id:3,x:4,y:6,v:10},{id:3,x:7,y:5,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,1,0,0,1,0,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,1,1,0,0,1,0,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:5,y:4,v:1},{id:6,x:15,y:11,v:1},{id:6,x:7,y:11,v:1},{id:6,x:8,y:11,v:1},{id:6,x:9,y:11,v:1},{id:3,x:6,y:5,v:1},{id:3,x:8,y:4,v:2},{id:3,x:13,y:4,v:2},{id:6,x:11,y:4,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:7,sprites:[{id:7,x:10,y:6,v:1},{id:6,x:8,y:6,v:1},{id:3,x:12,y:6,v:1},{id:3,x:4,y:4,v:2},{id:3,x:16,y:5,v:1},{id:3,x:16,y:5,v:1},{id:3,x:15,y:4,v:1},{id:6,x:16,y:4,v:1},{id:6,x:13,y:11,v:1},{id:6,x:7,y:11,v:1},{id:6,x:14,y:10,v:1},{id:6,x:4,y:10,v:1},{id:6,x:8,y:10,v:1},{id:6,x:9,y:10,v:1},{id:6,x:10,y:10,v:1},{id:6,x:11,y:10,v:1},{id:6,x:12,y:10,v:1},{id:6,x:15,y:10,v:1},{id:3,x:5,y:10,v:1},{id:3,x:5,y:9,v:11},{id:6,x:6,y:10,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:2,sprites:[{id:7,x:14,y:4,v:1},{id:4,x:12,y:4,v:1},{id:6,x:9,y:4,v:1},{id:6,x:12,y:8,v:1},{id:6,x:10,y:11,v:1},{id:4,x:9,y:8,v:1},{id:4,x:12,y:11,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:5,sprites:[{id:7,x:4,y:4,v:1},{id:6,x:6,y:4,v:1},{id:6,x:7,y:4,v:1},{id:4,x:5,y:4,v:1},{id:6,x:16,y:11,v:1},{id:6,x:15,y:11,v:1},{id:6,x:13,y:11,v:1},{id:6,x:14,y:11,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:10,y:5,v:1},{id:5,x:8,y:12,v:1},{id:6,x:7,y:10,v:1},{id:6,x:10,y:11,v:1},{id:4,x:9,y:5,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:1,sprites:[{id:7,x:12,y:7,v:1},{id:3,x:12,y:11,v:1,fl:!1,fr:!1},{id:3,x:8,y:10,v:5,fl:!1,fr:!1},{id:3,x:9,y:9,v:1,fl:!1,fr:!1},{id:3,x:8,y:8,v:5,fl:!1,fr:!1},{id:3,x:8,y:6,v:5,fl:!1,fr:!1},{id:6,x:8,y:11,v:1},{id:6,x:12,y:9,v:1},{id:6,x:8,y:7,v:1},{id:6,x:12,y:5,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:7,sprites:[{id:3,x:13,y:8,v:1,fl:!0,fr:!0},{id:3,x:11,y:8,v:1,fl:!0,fr:!0},{id:4,x:12,y:8,v:1},{id:6,x:12,y:9,v:1},{id:6,x:6,y:9,v:1},{id:7,x:9,y:6,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,1,1,1],[1,1,1,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,1,1,1],[1,1,1,0,1,1,1,1,0,0,1,1,0,1,1,1,1,0,1,1,1],[1,1,1,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,1,1,1],[1,1,1,0,1,1,0,1,0,0,0,0,1,0,0,0,1,0,1,1,1],[1,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1],[1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:6,y:5,v:1},{id:6,x:15,y:8,v:1},{id:4,x:9,y:9,v:1},{id:6,x:5,y:9,v:1},{id:3,x:8,y:8,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,0,1,0,0,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:1,sprites:[{id:7,x:10,y:9,v:1},{id:6,x:7,y:9,v:1},{id:3,x:7,y:8,v:3,fl:!0,fr:!1},{id:3,x:9,y:9,v:1,fl:!1,fr:!1},{id:6,x:12,y:7,v:1},{id:3,x:8,y:7,v:1,fl:!1,fr:!1},{id:3,x:8,y:6,v:3,fl:!1,fr:!1},{id:3,x:11,y:6,v:1,fl:!1,fr:!1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:2,sprites:[{id:7,x:8,y:5,v:1},{id:6,x:10,y:6,v:1},{id:6,x:11,y:11,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,1,1,0,1,0,1,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,1,1,0,0,0,1,1,0,1,0,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:9,sprites:[{id:7,x:6,y:4,v:1},{id:3,x:8,y:5,v:1,fl:!0,fr:!0},{id:3,x:10,y:5,v:1,fl:!0,fr:!0},{id:3,x:12,y:5,v:4,fl:!0,fr:!0},{id:6,x:10,y:4,v:1},{id:4,x:13,y:10,v:1},{id:4,x:7,y:10,v:1},{id:6,x:5,y:10,v:1},{id:6,x:15,y:10,v:1},{id:5,x:10,y:11,v:!1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:0,sprites:[{id:7,x:12,y:6,v:1},{id:3,x:9,y:7,v:4,fl:!0,fr:!0},{id:6,x:9,y:6,v:1},{id:6,x:10,y:6,v:1},{id:6,x:11,y:6,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,0,0,0,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,0,0,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,0,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:0,sprites:[{id:7,x:10,y:6,v:1},{id:5,x:8,y:11,v:!0},{id:5,x:7,y:8,v:!0},{id:5,x:10,y:9,v:!0},{id:6,x:7,y:7,v:1},{id:6,x:8,y:10,v:1},{id:6,x:10,y:8,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,1,0,0,0,0,1,1,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,1,0,0,0,1,1,1,0,1,0,0,0,1,1,1,1],[1,1,1,1,0,1,0,0,0,1,1,1,0,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1],[1,1,1,1,0,1,0,0,1,1,1,1,0,1,0,1,0,1,1,1,1],[1,1,1,1,0,1,0,0,0,1,1,0,0,0,0,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:4,sprites:[{id:7,x:10,y:8,v:1},{id:3,x:8,y:7,v:1,fl:!1,fr:!0},{id:3,x:6,y:8,v:1,fl:!0,fr:!1},{id:3,x:6,y:6,v:1,fl:!0,fr:!1},{id:6,x:8,y:10,v:1},{id:6,x:11,y:10,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:11,y:12,v:1},{id:5,x:12,y:9,v:!0},{id:6,x:16,y:12,v:1},{id:4,x:13,y:3,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:8,sprites:[{id:7,x:14,y:5,v:1},{id:5,x:13,y:8,v:!0},{id:4,x:12,y:7,v:1},{id:6,x:11,y:11,v:1},{id:6,x:13,y:7,v:1},{id:6,x:11,y:7,v:1},{id:6,x:16,y:7,v:1},{id:3,x:11,y:6,v:4,fl:!0,fr:!1},{id:3,x:11,y:5,v:1,fl:!1,fr:!1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,1,1],[1,1,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,1,1],[1,1,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,1,1],[1,1,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:8,sprites:[{id:7,x:5,y:2,v:1},{id:4,x:6,y:3,v:1},{id:4,x:4,y:3,v:1},{id:3,x:5,y:3,v:1,fl:!0,fr:!0},{id:6,x:6,y:4,v:1},{id:6,x:4,y:4,v:1},{id:4,x:8,y:6,v:1},{id:3,x:9,y:6,v:1,fl:!0,fr:!1},{id:3,x:7,y:6,v:1,fl:!1,fr:!0},{id:4,x:6,y:9,v:1},{id:4,x:4,y:9,v:1},{id:3,x:5,y:9,v:1,fl:!0,fr:!0},{id:6,x:6,y:10,v:1},{id:6,x:4,y:10,v:1},{id:6,x:9,y:7,v:1},{id:6,x:7,y:7,v:1},{id:4,x:12,y:9,v:1},{id:4,x:10,y:9,v:1},{id:3,x:11,y:9,v:1,fl:!0,fr:!0},{id:6,x:11,y:10,v:1},{id:4,x:14,y:6,v:1},{id:3,x:15,y:6,v:1,fl:!0,fr:!1},{id:3,x:13,y:6,v:1,fl:!1,fr:!0},{id:6,x:14,y:7,v:1},{id:6,x:11,y:4,v:1},{id:4,x:12,y:3,v:1},{id:4,x:10,y:3,v:1},{id:3,x:11,y:3,v:1,fl:!0,fr:!0}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,0,0,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:8,sprites:[{id:7,x:15,y:3,v:1},{id:3,x:6,y:5,v:8},{id:3,x:13,y:4,v:4},{id:6,x:5,y:6,v:1},{id:6,x:6,y:7,v:1},{id:6,x:7,y:8,v:1},{id:6,x:12,y:7,v:1},{id:6,x:13,y:6,v:1},{id:6,x:16,y:11,v:1},{id:6,x:16,y:10,v:1},{id:6,x:4,y:11,v:1},{id:6,x:11,y:9,v:1},{id:6,x:4,y:10,v:1},{id:6,x:10,y:9,v:1},{id:6,x:9,y:9,v:1},{id:6,x:8,y:9,v:1},{id:6,x:10,y:11,v:1},{id:6,x:9,y:11,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:16,y:11,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,1,0,1,1,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:6,sprites:[{id:7,x:12,y:8,v:1},{id:5,x:10,y:9,v:!0},{id:8,x:16,y:9,v:!1},{id:8,x:10,y:5,v:!1},{id:6,x:6,y:10,v:1}]},{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],[1,1,1,1,0,1,0,0,1,1,0,1,0,1,0,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,1,1,1,1,0,1,0,1,0,1,1,1,1],[1,1,1,1,0,1,0,0,1,0,1,1,0,1,0,1,0,1,1,1,1],[1,1,1,1,0,1,0,0,1,0,0,1,0,1,0,1,0,1,1,1,1],[1,1,1,1,0,1,1,0,1,0,0,1,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],theme:9,sprites:[{id:7,x:12,y:12,v:1},{id:6,x:10,y:2,v:1},{id:5,x:6,y:12,v:1},{id:6,x:10,y:6,v:1}]}];class u extends r{constructor(i,t,s){super(e.ObjectTeleport,i,"img_teleport",t,s,e.TileWidth,e.TileWidth,0,0,0,3,!0),this.isSolid=!0,this.animDelay=2*e.AnimDefaultDelay,this.onFire=!1,this.animRow=0}move(){this.moving||(this.collisions(),this.gravity()),this.state===e.MoveDown&&this.doDown()}collisions(){}gravity(){return!this.corners.d&&(this.setState(e.MoveDown,!0),!0)}doDown(){this.counter+=e.PhysicsSpeed,this.counter<=e.TileWidth?this.y+=e.PhysicsSpeed:this.setState(e.MoveStand,!1)}draw(){super.draw(),this.drawFrost()}}class x{constructor(i,t=null){this.engine=i,this.level=t}save(){const i={};i.map=this.engine.map.map,i.theme=this.engine.map.theme,i.sprites=[];for(const t of this.engine.sprites){let s,h,n,r,o=void 0===t.length?1:t.length;o=t.id===e.ObjectJar?t.onFire:o,t.id===e.ObjectIce&&(s=t.frozen.left,h=t.frozen.right),t.id===e.ObjectTeleport&&(n=t.refId,r=t.linkid),i.sprites.push({id:t.id,x:t.xTile,y:t.yTile,v:o,fl:s,fr:h,ref:n,link:r})}return i}load(i){let t;void 0===g[i]&&(i=0),this.engine.level=i,t=this.level?this.level:g[i],this.engine.sprites=[],this.engine.map=new y(this.engine,t.map,t.theme);const s=new Map;for(const i of t.sprites)switch(i.id){case e.ObjectPlayer:this.engine.player=new v(this.engine,i.x,i.y),this.engine.addSprite(this.engine.player);break;case e.ObjectIce:{const t=new h(!0,!0);void 0!==i.fl&&(t.left=i.fl,t.right=i.fr),this.engine.addSprite(new l(this.engine,i.x,i.y,parseInt(i.v),t));break}case e.ObjectMetal:this.engine.addSprite(new m(this.engine,i.x,i.y,1));break;case e.ObjectFire:this.engine.addSprite(new a(this.engine,i.x,i.y));break;case e.ObjectJar:{const t=new c(this.engine,i.x,i.y);1===i.v&&t.turnOnFire(),this.engine.addSprite(t);break}case e.ObjectTeleport:{const t=new u(this.engine,i.x,i.y);this.engine.addSprite(t),t.linkId=i.link,s.set(i.ref,t);break}}if(s.size)for(const i of s.values()){const t=s.get(i.linkId);t&&(i.link=t)}}}class p{constructor(i){this.resources=i,this.sfxVolume=.3,this.musicVolume=.2,this.music=null,this.loadPreferences(),this.sfx={"fire-off":i.get("sfx-fire-off"),"ice-push":i.get("sfx-ice-push"),fall:i.get("sfx-fall"),falling:i.get("sfx-falling"),"new-ice":i.get("sfx-new-ice"),climb:i.get("sfx-climb"),"ice-collision":i.get("sfx-ice-collision"),"stage-enter":i.get("sfx-stage-enter"),danger:i.get("sfx-danger"),"ice-remove":i.get("sfx-ice-remove"),"state-leave":i.get("sfx-state-leave"),"ice-disabled":i.get("sfx-disabled")}}loadPreferences(){try{const i=localStorage.getItem("musicOn"),t=localStorage.getItem("soundOn");this.musicOn=null===i||"true"===i,this.soundOn=null===t||"true"===t}catch{this.musicOn=!0,this.soundOn=!0}}savePreferences(){try{localStorage.setItem("musicOn",String(this.musicOn)),localStorage.setItem("soundOn",String(this.soundOn))}catch{}}toggleMusic(){return this.musicOn=!this.musicOn,this.savePreferences(),this.music&&(this.musicOn?this.music.play().catch(()=>{}):this.music.pause()),this.musicOn}toggleSound(){return this.soundOn=!this.soundOn,this.savePreferences(),this.soundOn}setSfxVolume(i){this.sfxVolume=Math.max(0,Math.min(1,i))}setMusicVolume(i){this.musicVolume=Math.max(0,Math.min(1,i)),this.music&&(this.music.volume=this.musicVolume)}play(i){if(!this.soundOn)return;const t=this.sfx[i];t&&(t.volume=this.sfxVolume,t.currentTime=0,t.play().catch(()=>{}))}playOnce(i){const t=this.sfx[i];t&&t.paused&&this.soundOn&&(t.volume=this.sfxVolume,t.currentTime=0,t.play().catch(()=>{}))}stop(i){const t=this.sfx[i];t&&(t.pause(),t.currentTime=0)}soundtrack(){this.music=this.resources.get("sfx-music-sparks"),this.music&&(this.music.muted=!1,this.music.volume=this.musicVolume,this.music.loop=!0,this.musicOn&&this.music.play().catch(()=>{const i=()=>{this.musicOn&&this.music&&this.music.play().catch(()=>{}),document.removeEventListener("keydown",i)};document.addEventListener("keydown",i,{once:!0})}))}}class f{constructor(i,t,s,h,n){this.color=void 0===h?e.ColorWhite:h,this.r=4,this.x=t,this.y=s,this.vx=(4*Math.random()-2)*n,this.vy=(6*Math.random()-4)*n,this.speed=.15,this.life=255,this.ctx=i}draw(){const i=this.life/255;this.ctx.beginPath(),this.ctx.fillStyle="rgba("+this.color+","+i+")",this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()}move(){this.x+=this.vx,this.y+=this.vy,this.vy+=this.speed,this.life-=5}}class S extends n{constructor(i,t,s,h,n,r){super(null,i,t,s,32,32),this.color=void 0===h?"255,255,255":h,this.length=void 0===n?10:n,this.intensity=void 0===r?1:r,this.particles=[];for(let i=0;i<this.length;i++)this.particles[i]=new f(this.engine.ctx,t*e.TileWidth+16,s*e.TileWidth+16,this.color,this.intensity)}draw(){this.engine.ctx.save();for(let i=0;i<this.particles.length;i++)this.particles[i].draw();this.engine.ctx.restore()}engineMove(){this.move()}move(){for(let i=0;i<this.particles.length;i++)this.particles[i].move(),this.particles[i].life<0&&this.particles.splice(i,1);this.particles.length||this.removeSelf()}removeSelf(){for(let i=0;i<this.engine.sfxs.length;i++)this.engine.sfxs[i]===this&&this.engine.sfxs.splice(i,1)}}class T{constructor({canvas:i,resources:t,onLevelComplete:e=null,level:s=null}){this.canvas=i,this.cwidth=i.width,this.cheight=i.height,this.resources=t,this.ctx=this.canvas.getContext("2d"),this.sprites=[],this.sfxs=[],this.player={},this.level=0,this.keyboard=new d,this.sound=new p(t),this.scene=new x(this,s),this.gameMode="game",this.onLevelCompleteCallback=e,this.noSpriteMoveCount=0;const h=localStorage.getItem("level");null!==s&&(this.level=parseInt(h,10)),this.scene.load(this.level)}draw(){this.ctx.clearRect(0,0,this.cwidth,this.cheight),this.map.draw();for(let i=this.sprites.length-1;i>=0;i--)this.sprites[i].draw();for(let i=0;i<this.sfxs.length;++i)this.sfxs[i].draw()}collision(){const i="editor"===this.gameMode;this.sprites.filter(i=>i.id===e.ObjectFire).length||i||this.player.state===e.MoveLevelExit||this.player.outro()}nextLevel(){const i="editor"===this.gameMode;this.onLevelCompleteCallback&&!i&&this.onLevelCompleteCallback(this.level)}loadNextLevel(){this.level++,"game"===this.gameMode&&localStorage.setItem("level",this.level),this.scene.load(this.level)}move(){for(let i=0;i<this.sprites.length;++i)this.sprites[i].engineMove();for(let i=0;i<this.sfxs.length;++i)this.sfxs[i].engineMove();let i=!1;for(let t=0;t<this.sprites.length;++t)this.sprites[t]&&this.sprites[t].id!==e.ObjectPlayer&&this.sprites[t].moving&&(i=!0);i?this.noSpriteMoveCount=0:this.noSpriteMoveCount+=1,!i&&this.noSpriteMoveCount>1&&(this.noSpriteMoveCount=0,this.input()),this.collision()}input(){(this.keyboard.down||this.keyboard.action)&&this.player.iceOrTeleport(),this.keyboard.left&&this.player.left(),this.keyboard.right&&this.player.right(),this.keyboard.enter&&(this.sound.stop("danger"),this.scene.load(this.level),this.keyboard.enter=!1)}iceAt(i,t){for(let e=0;e<this.sprites.length;e++)if(this.sprites[e].isSpriteAt(i,t))return this.sprites[e];return!1}addIceBlock(i,t){const s=[];for(let h=0;h<this.sprites.length;h++)if(this.sprites[h].id===e.ObjectIce&&this.sprites[h].yTile===t){const t=this.sprites[h];t.xTile-1!==i&&t.xTile+t.length!==i||s.push(t)}0===s.length?this.sprites.push(new l(this,i,t,1)):1===s.length?s[0].addBlock(i):s[0].xTile<=s[1].xTile?this.joinIceBlocks(s[0],s[1]):this.joinIceBlocks(s[1],s[0])}joinIceBlocks(i,t){const e=i.xTile,s=i.yTile,n=i.length+t.length+1;this.addSprite(new l(this,e,s,n,new h(i.frozen.left,t.frozen.right))),this.removeSprite(i),this.removeSprite(t)}removeIceBlock(i,t){for(let s=0;s<this.sprites.length;s++)if(this.sprites[s].id===e.ObjectIce&&this.sprites[s].yTile===t&&i>=this.sprites[s].xTile&&i<this.sprites[s].xTile+this.sprites[s].length)return void(this.sprites[s].removeBlock(i)<=0&&this.sprites.splice(s,1))}removeFire(i,t){for(let s=0;s<this.sprites.length;s++)if(this.sprites[s].yTile===t&&i===this.sprites[s].xTile&&this.sprites[s].id===e.ObjectFire)return void this.sprites.splice(s,1)}addSprite(i){this.sprites.push(i)}removeSprite(i){for(let t=0;t<this.sprites.length;t++)if(this.sprites[t]===i)return this.sprites.splice(t,1),!0;return!1}addSparks(i,t,e,s,h){this.sfxs.push(new S(this,i,t,e,s,h))}spriteTypeAt(i,t,s){if(s=void 0===s?e.ObjectOut:s,i<0||t<0||i>this.map.width||t>this.map.height)return e.ObjectOut;if(this.map.map[t][i])return this.map.map[t][i];for(let e=0;e<this.sprites.length;e++)if(this.sprites[e].isSpriteAt(i,t)&&this.sprites[e].id!==s)return this.sprites[e].id;return e.ObjectBackground}spriteAt(i,t){if(!this.map.map[t][i])for(let e=0;e<this.sprites.length;e++)if(this.sprites[e].isSpriteAt(i,t))return this.sprites[e];return null}}class w{constructor(){this.score=0,this.levelStartTime=0,this.loadFromStorage()}loadFromStorage(){try{const i=localStorage.getItem("gameState");if(i){const t=JSON.parse(i);this.score=t.score||0,this.bestTimes=t.bestTimes||{}}else this.bestTimes={}}catch{this.score=0,this.bestTimes={}}}saveToStorage(){try{localStorage.setItem("gameState",JSON.stringify({score:this.score,bestTimes:this.bestTimes}))}catch{}}startLevelTimer(){this.levelStartTime=performance.now()}completeLevel(i){const t=Math.floor((performance.now()-this.levelStartTime)/1e3),e=`level_${i}`,s=Math.max(0,100-t);return this.score+=100+s,(!this.bestTimes[e]||t<this.bestTimes[e])&&(this.bestTimes[e]=t),this.saveToStorage(),{completionTime:t,timeBonus:s}}getBestTime(i){return this.bestTimes[`level_${i}`]||null}resetScore(){this.score=0,this.saveToStorage()}}class b{constructor({canvas:i,resources:t,gameMode:s="game",onLevelComplete:h=null,level:n=null}){this.time=performance.now(),this.canvas=i,this.ctx=i.getContext("2d"),this.engine=new T({canvas:i,resources:t,level:n,onLevelComplete:i=>this.onLevelComplete(i)}),this.gameState=new w,this.levels=g,this.state=e.GameStatePlay,this.gameMode=s,this.engine.gameMode=s,this.engine.sound.soundtrack(),this.gameState.startLevelTimer(),this.onLevelCompleteCallback=h,this.transitionPhase=null,this.transitionRadius=0,this.maxRadius=Math.sqrt(this.canvas.width**2+this.canvas.height**2)/2+50,this.transitionSpeed=15,this.transitionCenterX=0,this.transitionCenterY=0,this.gameLoop=this.gameLoop_.bind(this),this.intervalId=setInterval(()=>this.gameLoop(),1e3/60)}gameLoop_(){this.checkPause(),this.state!==e.GameStatePaused?this.state!==e.GameStateTransition?(this.engine.draw(),this.engine.move(),"opening"===this.transitionPhase&&this.drawCircleTransition()):this.updateTransition():this.drawPauseMenu()}startNextlevel(){this.gameState.startLevelTimer(),this.engine.loadNextLevel(),this.transitionPhase="opening",this.transitionCenterX=this.engine.player.x+16,this.transitionCenterY=this.engine.player.y+16}onLevelComplete(i){this.gameState.completeLevel(i),this.transitionCenterX=this.engine.player.x+16,this.transitionCenterY=this.engine.player.y+16,this.transitionRadius=this.maxRadius,this.transitionPhase="closing",this.state=e.GameStateTransition,this.onLevelCompleteCallback&&this.onLevelCompleteCallback(i)}updateTransition(){"closing"===this.transitionPhase?(this.engine.draw(),this.drawCircleTransition(),this.transitionRadius-=this.transitionSpeed,this.transitionRadius<=0&&(this.transitionRadius=0,"game"===this.gameMode&&this.startNextlevel())):"opening"===this.transitionPhase&&(this.engine.draw(),this.drawCircleTransition(),this.transitionRadius+=this.transitionSpeed,this.transitionRadius>=this.maxRadius&&(this.transitionPhase=null,this.state=e.GameStatePlay))}drawCircleTransition(){this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.arc(this.transitionCenterX,this.transitionCenterY,Math.max(0,this.transitionRadius),0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fillStyle="#000",this.ctx.fill(),this.ctx.restore()}checkPause(){this.engine.keyboard.escape&&this.state===e.GameStatePlay?(this.engine.keyboard.escape=!1,this.state=e.GameStatePaused,this.engine.sound.music&&this.engine.sound.music.pause()):this.engine.keyboard.escape&&this.state===e.GameStatePaused&&(this.engine.keyboard.escape=!1,this.state=e.GameStatePlay,this.engine.sound.musicOn&&this.engine.sound.music.play().catch(()=>{}))}drawPauseMenu(){if(this.engine.keyboard.mKey&&(this.engine.keyboard.mKey=!1,this.engine.sound.toggleMusic()),this.engine.keyboard.sKey&&(this.engine.keyboard.sKey=!1,this.engine.sound.toggleSound()),this.engine.keyboard.enter)return this.engine.keyboard.enter=!1,this.state=e.GameStatePlay,this.engine.scene.load(this.engine.level),void(this.engine.sound.musicOn&&this.engine.sound.music&&this.engine.sound.music.play().catch(()=>{}));this.engine.draw(),this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#fff",this.ctx.font="bold 32px monospace",this.ctx.textAlign="center",this.ctx.fillText("PAUSED",this.canvas.width/2,this.canvas.height/2-60),this.ctx.font="16px monospace",this.ctx.fillText("ESC - Resume",this.canvas.width/2,this.canvas.height/2-10),this.ctx.fillText("ENTER - Restart level",this.canvas.width/2,this.canvas.height/2+15),this.ctx.fillText("M - Music: "+(this.engine.sound.musicOn?"ON":"OFF"),this.canvas.width/2,this.canvas.height/2+40),this.ctx.fillText("S - Sound: "+(this.engine.sound.soundOn?"ON":"OFF"),this.canvas.width/2,this.canvas.height/2+65)}destroy(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.engine&&this.engine.keyboard&&this.engine.keyboard.destroy()}}class A{constructor(){this.definitions=[],this.resources={},this.loaded=0,this.canvas=document.getElementById("canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"))}add(i,t,e){this.definitions.push({type:i,name:t,src:e})}get(i){return this.resources[i]}check(i){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#fff",this.ctx.fillRect(50,250,450*this.loaded/this.definitions.length,40)),this.loaded===this.definitions.length&&i()}ready(i){for(const t of this.definitions){if("image"===t.type){const e=new Image;e.addEventListener("load",()=>{this.loaded+=1,this.check(i)}),e.src=t.src,this.resources[t.name]=e}if("audio"===t.type){const e=document.getElementById(t.name);this.loaded+=1,this.resources[t.name]=e,this.check(i)}}}}async function k(){let i;const t=new Promise(t=>i=t),e=new A;return e.add("image","tilemap","/images/tilemap.png"),e.add("image","img_ice","/images/ice.png"),e.add("image","img_jar","/images/jar.png"),e.add("image","img_fire","/images/fire.png"),e.add("image","img_dona","/images/dona.png"),e.add("image","img_intro","/images/intro.png"),e.add("image","img_metal","/images/metal.png"),e.add("image","img_teleport","/images/teleport.png"),e.add("image","frost","/images/frozen.png"),e.add("audio","sfx-ice-push","/sounds/sfx-ice-push.mp3"),e.add("audio","sfx-fire-off","/sounds/sfx-fire-off.mp3"),e.add("audio","sfx-falling","/sounds/sfx-falling.mp3"),e.add("audio","sfx-new-ice","/sounds/sfx-new-ice.mp3"),e.add("audio","sfx-climb","/sounds/sfx-climb.mp3"),e.add("audio","sfx-ice-collision","/sounds/sfx-ice-collision.mp3"),e.add("audio","sfx-stage-enter","/sounds/sfx-stage-enter.mp3"),e.add("audio","sfx-danger","/sounds/sfx-danger.mp3"),e.add("audio","sfx-ice-remove","/sounds/sfx-ice-remove.mp3"),e.add("audio","sfx-state-leave","/sounds/sfx-state-leave.mp3"),e.add("audio","sfx-disabled","/sounds/sfx-disabled.mp3"),e.add("audio","sfx-fall","/sounds/sfx-fall.mp3"),e.add("audio","sfx-music-sparks","/music/sparks.mp3"),e.ready(()=>{i(e)}),t}FireNIce=t})();